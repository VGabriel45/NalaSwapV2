{"ast":null,"code":"var _jsxFileName = \"/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/src/pages/StakePage.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport stakingContractABI from \"../ABIS/StakingABI.json\";\nimport { BigNumber, Contract, ethers, utils } from 'ethers';\nimport { formatUnits, parseEther } from '@ethersproject/units';\nimport { useEffect, useState, Fragment } from \"react\";\nimport Box from '@mui/material/Box';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport contractAddresses from \"../utils/contractsAddresses.json\";\nimport { BigNumber as JsBigNumber } from 'bignumber.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function StakePage() {\n  _s();\n\n  const [balance, setBalance] = useState(0);\n  const [apr, setApr] = useState(0);\n  const [balanceWithRewards, setBalanceWithRewards] = useState(0);\n  const [amount, setAmount] = useState(0);\n  const [rewardsPerDay, setRewardsPerDay] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const contractAddress = contractAddresses.stakingContract;\n  const nlaTokenAddress = contractAddresses.nalaTokenAddress;\n  const TOKENS_PER_BLOCK = 0.5;\n  useEffect(() => {\n    getUserStakedAmount();\n    getRewardsPerDay();\n    getUserBalanceWithRewards();\n    Promise.resolve(getUserStakedAmount()).then(stakedAmount => getAPR(stakedAmount, TOKENS_PER_BLOCK)); // get staked amout without using async await inside useEffect\n  }, []);\n\n  const getAPR = async (totalStaked, tokenPerBlock) => {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer) {\n        try {\n          const nalaTokenAdress = \"0xA4D285a9B6B1924C6C003dAc8ef49bc4607D684b\";\n          const wBNBTokenAddress = \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\";\n          const pancakeRouterV2 = new ethers.Contract(\"0x10ED43C718714eb63d5aA57B78B54704E256024E\", [\"function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)\"], signer); // how much NLA tokens we get for 1 BNB \n\n          const amountsOut = await pancakeRouterV2.getAmountsOut(ethers.utils.parseEther(\"1\"), [wBNBTokenAddress, nalaTokenAdress]);\n          const amoutOfNLAFor1BNB = formatUnits(amountsOut[1].toString(), 18);\n          const nlaPriceInBNB = 1 / amoutOfNLAFor1BNB; // NLA Token price in BNB\n\n          const totalRewardPricePerYear = new JsBigNumber(nlaPriceInBNB).times(tokenPerBlock).times(28640);\n          const totalStakingTokenInPool = new JsBigNumber(nlaPriceInBNB).times(totalStaked);\n          const apr = totalRewardPricePerYear.div(totalStakingTokenInPool).times(10);\n          setApr(apr.toNumber());\n        } catch (error) {\n          setApr(0);\n        }\n      }\n    }\n  };\n\n  const stakeTokens = async amount => {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer && parseInt(amount) > 0) {\n        const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n        const nlaToken = new ethers.Contract(nlaTokenAddress, [\"function approve(address _spender, uint256 _value) public returns (bool success)\"], signer);\n        await nlaToken.connect(signer).approve(stakingContract.address, \"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\n        try {\n          const tx = await stakingContract.connect(signer).stakeTokens(ethers.utils.parseEther(amount.toString()));\n          tx.wait();\n          console.log(tx);\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      } else {\n        setErrorMessage(\"Cannot stake 0 tokens\");\n      }\n    }\n  };\n\n  const withdrawTokens = async amount => {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer && parseInt(amount) > 0) {\n        const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n        const nlaToken = new ethers.Contract(nlaTokenAddress, [\"function approve(address _spender, uint256 _value) public returns (bool success)\"], signer);\n        nlaToken.connect(signer).approve(stakingContract.address, \"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n\n        try {\n          const tx = await stakingContract.connect(signer).withdrawTokens(ethers.utils.parseEther(amount.toString()));\n          tx.wait();\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      } else {\n        setErrorMessage(\"Cannot stake 0 tokens\");\n      }\n    }\n  };\n\n  const getUserStakedAmount = async () => {\n    let balance;\n\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer) {\n        const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n\n        try {\n          balance = await stakingContract.stakerBalance(signer.getAddress());\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      }\n    } // console.log(formatUnits(BigNumber.from(balance.toString(), 18)));\n\n\n    setBalance(formatUnits(BigNumber.from(balance.toString(), 18)));\n    return formatUnits(BigNumber.from(balance.toString(), 18));\n  };\n\n  const getUserBalanceWithRewards = async () => {\n    let balance;\n\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer) {\n        const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n\n        try {\n          balance = await stakingContract.getBalanceWithRewards(signer.getAddress());\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      }\n    } // console.log(formatUnits(BigNumber.from(balance.toString(), 18)));\n\n\n    setBalanceWithRewards(formatUnits(BigNumber.from(balance.toString(), 18)));\n  };\n\n  const getRewardsPerDay = async () => {\n    let rewards;\n\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer) {\n        const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n\n        try {\n          rewards = await stakingContract.getRewardsPerDay(signer.getAddress());\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      }\n    }\n\n    setRewardsPerDay(formatUnits(BigNumber.from(rewards.toString(), 18)));\n  };\n\n  const buttons = [/*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => stakeTokens(amount),\n    children: \"Deposit\"\n  }, \"Deposit\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => withdrawTokens(amount),\n    children: \"Withdraw\"\n  }, \"Withdraw\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 9\n  }, this)];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"small\", {\n      children: \"Stake your NLA tokens\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      sx: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        '& > *': {\n          m: 1\n        }\n      },\n      noValidate: true,\n      autoComplete: \"off\",\n      style: {\n        borderRadius: \"10px\",\n        border: \"2px solid #502199\",\n        marginBottom: \"5%\",\n        paddingBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"25px\"\n          },\n          children: [\"Total staked: \", balance]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"25px\"\n          },\n          children: [\"Current balance: \", balanceWithRewards]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"25px\"\n          },\n          children: [\"Rewards per day: \", rewardsPerDay]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"25px\"\n          },\n          children: [\"APR \", apr, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n        size: \"large\",\n        \"aria-label\": \"large button group\",\n        children: buttons\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"outlined-basic\",\n        label: \"Amount...\",\n        variant: \"outlined\",\n        size: \"small\",\n        type: \"number\",\n        onChange: e => setAmount(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n        style: {\n          color: \"red\"\n        },\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true);\n}\n\n_s(StakePage, \"zfwsaf3oRXPegbLDdtxs7cuO+10=\");\n\n_c = StakePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StakePage\");","map":{"version":3,"names":["React","stakingContractABI","BigNumber","Contract","ethers","utils","formatUnits","parseEther","useEffect","useState","Fragment","Box","ButtonGroup","Button","TextField","contractAddresses","JsBigNumber","StakePage","balance","setBalance","apr","setApr","balanceWithRewards","setBalanceWithRewards","amount","setAmount","rewardsPerDay","setRewardsPerDay","errorMessage","setErrorMessage","contractAddress","stakingContract","nlaTokenAddress","nalaTokenAddress","TOKENS_PER_BLOCK","getUserStakedAmount","getRewardsPerDay","getUserBalanceWithRewards","Promise","resolve","then","stakedAmount","getAPR","totalStaked","tokenPerBlock","window","ethereum","provider","providers","Web3Provider","signer","getSigner","nalaTokenAdress","wBNBTokenAddress","pancakeRouterV2","amountsOut","getAmountsOut","amoutOfNLAFor1BNB","toString","nlaPriceInBNB","totalRewardPricePerYear","times","totalStakingTokenInPool","div","toNumber","error","stakeTokens","parseInt","nlaToken","connect","approve","address","tx","wait","console","log","withdrawTokens","stakerBalance","getAddress","from","getBalanceWithRewards","rewards","buttons","display","flexDirection","alignItems","m","borderRadius","border","marginBottom","paddingBottom","fontSize","e","target","value","color"],"sources":["/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/src/pages/StakePage.js"],"sourcesContent":["import * as React from 'react';\nimport stakingContractABI from \"../ABIS/StakingABI.json\";\nimport { BigNumber, Contract, ethers, utils } from 'ethers';\nimport { formatUnits, parseEther } from '@ethersproject/units';\nimport {useEffect, useState, Fragment} from \"react\";\nimport Box from '@mui/material/Box';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport contractAddresses from \"../utils/contractsAddresses.json\";\nimport {BigNumber as JsBigNumber} from 'bignumber.js'\n\nexport default function StakePage () {\n\n    const [balance, setBalance] = useState(0);\n    const [apr, setApr] = useState(0);\n    const [balanceWithRewards, setBalanceWithRewards] = useState(0);\n    const [amount, setAmount] = useState(0);\n    const [rewardsPerDay, setRewardsPerDay] = useState(0);\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    const contractAddress = contractAddresses.stakingContract;\n    const nlaTokenAddress = contractAddresses.nalaTokenAddress;\n\n    const TOKENS_PER_BLOCK = 0.5;\n\n    useEffect(() => {\n        getUserStakedAmount();\n        getRewardsPerDay();\n        getUserBalanceWithRewards();\n        Promise.resolve(getUserStakedAmount()).then(stakedAmount => getAPR(stakedAmount, TOKENS_PER_BLOCK)); // get staked amout without using async await inside useEffect\n    }, [])\n\n    const getAPR = async (\n        totalStaked,\n        tokenPerBlock,\n      ) => {\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if(signer) {\n                try {\n                    const nalaTokenAdress = \"0xA4D285a9B6B1924C6C003dAc8ef49bc4607D684b\";\n                    const wBNBTokenAddress = \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\";\n                    const pancakeRouterV2 = new ethers.Contract(\"0x10ED43C718714eb63d5aA57B78B54704E256024E\", [\"function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)\"], signer);\n                \n                    // how much NLA tokens we get for 1 BNB \n                    const amountsOut = await pancakeRouterV2\n                    .getAmountsOut(\n                        ethers.utils.parseEther(\"1\"), \n                        [wBNBTokenAddress, nalaTokenAdress]\n                    )\n                \n                    const amoutOfNLAFor1BNB = formatUnits(amountsOut[1].toString(), 18);\n                    const nlaPriceInBNB = 1 / amoutOfNLAFor1BNB; // NLA Token price in BNB\n                \n                    const totalRewardPricePerYear = new JsBigNumber(nlaPriceInBNB).times(tokenPerBlock).times(28640)\n                    const totalStakingTokenInPool = new JsBigNumber(nlaPriceInBNB).times(totalStaked)\n                    const apr = totalRewardPricePerYear.div(totalStakingTokenInPool).times(10)\n                    \n                    setApr(apr.toNumber());\n                } catch (error) {\n                    setApr(0);\n                }\n            }\n        }\n    }\n\n    const stakeTokens = async (amount) => {\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer && parseInt(amount) > 0) {\n              const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n              const nlaToken = new ethers.Contract(nlaTokenAddress, [\"function approve(address _spender, uint256 _value) public returns (bool success)\"], signer);\n              await nlaToken.connect(signer).approve(stakingContract.address, \"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n              try {\n                const tx = await stakingContract.connect(signer).stakeTokens(\n                    ethers.utils.parseEther(amount.toString())\n                )\n                tx.wait();\n                console.log(tx);\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            } else {\n                setErrorMessage(\"Cannot stake 0 tokens\");\n            }\n        }\n        \n    }\n\n    const withdrawTokens = async (amount) => {\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer && parseInt(amount) > 0) {\n              const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n              const nlaToken = new ethers.Contract(nlaTokenAddress, [\"function approve(address _spender, uint256 _value) public returns (bool success)\"], signer);\n              nlaToken.connect(signer).approve(stakingContract.address, \"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\n              try {\n                const tx = await stakingContract.connect(signer).withdrawTokens(\n                    ethers.utils.parseEther(amount.toString())\n                )\n                tx.wait();\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            } else {\n                setErrorMessage(\"Cannot stake 0 tokens\");\n            }\n        }\n        \n    }\n\n    const getUserStakedAmount = async () => {\n\n        let balance;\n\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer) {\n              const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n              try {\n                balance = await stakingContract.stakerBalance(signer.getAddress());\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            }\n        }\n\n        // console.log(formatUnits(BigNumber.from(balance.toString(), 18)));\n        setBalance(formatUnits(BigNumber.from(balance.toString(), 18)));\n        return formatUnits(BigNumber.from(balance.toString(), 18));\n    }\n\n    const getUserBalanceWithRewards = async () => {\n\n        let balance;\n\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer) {\n              const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n              try {\n                balance = await stakingContract.getBalanceWithRewards(signer.getAddress());\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            }\n        }\n\n        // console.log(formatUnits(BigNumber.from(balance.toString(), 18)));\n        setBalanceWithRewards(formatUnits(BigNumber.from(balance.toString(), 18)));\n    }\n\n    const getRewardsPerDay = async () => {\n        let rewards;\n\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer) {\n              const stakingContract = new ethers.Contract(contractAddress, stakingContractABI, signer);\n              try {\n                rewards = await stakingContract.getRewardsPerDay(signer.getAddress());\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            }\n        }\n\n        setRewardsPerDay(formatUnits(BigNumber.from(rewards.toString(), 18)));\n    }\n\n    const buttons = [\n        <Button key=\"Deposit\" onClick={() => stakeTokens(amount)}>Deposit</Button>,\n        <Button key=\"Withdraw\" onClick={() => withdrawTokens(amount)}>Withdraw</Button>,\n    ];\n\n    return (\n        <>\n            <small>Stake your NLA tokens</small>\n             <Box\n                component=\"form\"\n                sx={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    '& > *': {\n                      m: 1,\n                    },\n                  }}\n                noValidate\n                autoComplete=\"off\"\n                style={{borderRadius:\"10px\", border:\"2px solid #502199\", marginBottom:\"5%\", paddingBottom: \"10px\"}}\n                >\n                <div >\n                    <p style={{fontSize: \"25px\"}}>Total staked: {balance}</p>\n                    <p style={{fontSize: \"25px\"}}>Current balance: {balanceWithRewards}</p>\n                    <p style={{fontSize: \"25px\"}}>Rewards per day: {rewardsPerDay}</p>\n                    <p style={{fontSize: \"25px\"}}>APR {apr}%</p>\n                </div>\n                <ButtonGroup size=\"large\" aria-label=\"large button group\">\n                    {buttons}\n                </ButtonGroup>\n                <TextField id=\"outlined-basic\" label=\"Amount...\" variant=\"outlined\" size=\"small\" type=\"number\" onChange={(e) => setAmount(e.target.value)}/>\n                <small style={{color: \"red\"}}>{errorMessage}</small>\n            </Box>\n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}