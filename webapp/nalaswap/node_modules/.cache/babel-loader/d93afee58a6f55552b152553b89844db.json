{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReturnData = void 0;\n\nconst ethereumjs_abi_1 = require(\"ethereumjs-abi\");\n\nconst errors_1 = require(\"../../core/errors\"); // selector of Error(string)\n\n\nconst ERROR_SELECTOR = \"08c379a0\"; // selector of Panic(uint256)\n\nconst PANIC_SELECTOR = \"4e487b71\";\n/**\n * Represents the returnData of a transaction, whose contents are unknown.\n */\n\nclass ReturnData {\n  constructor(value) {\n    this.value = value;\n\n    if (value.length >= 4) {\n      this._selector = value.slice(0, 4).toString(\"hex\");\n    }\n  }\n\n  isEmpty() {\n    return this.value.length === 0;\n  }\n\n  matchesSelector(selector) {\n    if (this._selector === undefined) {\n      return false;\n    }\n\n    return this._selector === selector.toString(\"hex\");\n  }\n\n  isErrorReturnData() {\n    return this._selector === ERROR_SELECTOR;\n  }\n\n  isPanicReturnData() {\n    return this._selector === PANIC_SELECTOR;\n  }\n\n  decodeError() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n\n    (0, errors_1.assertHardhatInvariant)(this._selector === ERROR_SELECTOR, \"Expected return data to be a Error(string)\");\n    const decoded = (0, ethereumjs_abi_1.rawDecode)([\"string\"], this.value.slice(4));\n    return decoded.toString(\"utf8\");\n  }\n\n  decodePanic() {\n    (0, errors_1.assertHardhatInvariant)(this._selector === PANIC_SELECTOR, \"Expected return data to be a Panic(uint256)\");\n    const [errorCode] = (0, ethereumjs_abi_1.rawDecode)([\"uint256\"], this.value.slice(4));\n    return errorCode;\n  }\n\n}\n\nexports.ReturnData = ReturnData;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAGA,8C,CAEA;;;AACA,MAAMA,cAAc,GAAG,UAAvB,C,CACA;;AACA,MAAMC,cAAc,GAAG,UAAvB;AAEA;;;;AAGA,MAAaC,UAAb,CAAuB;EAGrBC,YAAmBC,KAAnB,EAAgC;IAAb;;IACjB,IAAIA,KAAK,CAACC,MAAN,IAAgB,CAApB,EAAuB;MACrB,KAAKC,SAAL,GAAiBF,KAAK,CAACG,KAAN,CAAY,CAAZ,EAAe,CAAf,EAAkBC,QAAlB,CAA2B,KAA3B,CAAjB;IACD;EACF;;EAEMC,OAAO;IACZ,OAAO,KAAKL,KAAL,CAAWC,MAAX,KAAsB,CAA7B;EACD;;EAEMK,eAAe,CAACC,QAAD,EAAiB;IACrC,IAAI,KAAKL,SAAL,KAAmBM,SAAvB,EAAkC;MAChC,OAAO,KAAP;IACD;;IAED,OAAO,KAAKN,SAAL,KAAmBK,QAAQ,CAACH,QAAT,CAAkB,KAAlB,CAA1B;EACD;;EAEMK,iBAAiB;IACtB,OAAO,KAAKP,SAAL,KAAmBN,cAA1B;EACD;;EAEMc,iBAAiB;IACtB,OAAO,KAAKR,SAAL,KAAmBL,cAA1B;EACD;;EAEMc,WAAW;IAChB,IAAI,KAAKN,OAAL,EAAJ,EAAoB;MAClB,OAAO,EAAP;IACD;;IAED,qCACE,KAAKH,SAAL,KAAmBN,cADrB,EAEE,4CAFF;IAKA,MAAMgB,OAAO,GAAG,gCAAU,CAAC,QAAD,CAAV,EAAsB,KAAKZ,KAAL,CAAWG,KAAX,CAAiB,CAAjB,CAAtB,CAAhB;IACA,OAAOS,OAAO,CAACR,QAAR,CAAiB,MAAjB,CAAP;EACD;;EAEMS,WAAW;IAChB,qCACE,KAAKX,SAAL,KAAmBL,cADrB,EAEE,6CAFF;IAKA,MAAM,CAACiB,SAAD,IAAc,gCAAU,CAAC,SAAD,CAAV,EAAuB,KAAKd,KAAL,CAAWG,KAAX,CAAiB,CAAjB,CAAvB,CAApB;IAEA,OAAOW,SAAP;EACD;;AApDoB;;AAAvBC","names":["ERROR_SELECTOR","PANIC_SELECTOR","ReturnData","constructor","value","length","_selector","slice","toString","isEmpty","matchesSelector","selector","undefined","isErrorReturnData","isPanicReturnData","decodeError","decoded","decodePanic","errorCode","exports"],"sourceRoot":"","sources":["../../../src/internal/hardhat-network/provider/return-data.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}