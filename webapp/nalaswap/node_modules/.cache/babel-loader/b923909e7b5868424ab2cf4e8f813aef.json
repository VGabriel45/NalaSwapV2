{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TasksDSL = void 0;\n\nconst task_definitions_1 = require(\"./task-definitions\");\n/**\n * This class defines the DSL used in Hardhat config files\n * for creating and overriding tasks.\n */\n\n\nclass TasksDSL {\n  constructor() {\n    this.internalTask = this.subtask;\n    this._tasks = {};\n  }\n\n  task(name, descriptionOrAction, action) {\n    return this._addTask(name, descriptionOrAction, action, false);\n  }\n\n  subtask(name, descriptionOrAction, action) {\n    return this._addTask(name, descriptionOrAction, action, true);\n  }\n  /**\n   * Retrieves the task definitions.\n   *\n   * @returns The tasks container.\n   */\n\n\n  getTaskDefinitions() {\n    return this._tasks;\n  }\n\n  _addTask(name, descriptionOrAction, action, isSubtask) {\n    const parentTaskDefinition = this._tasks[name];\n    let taskDefinition;\n\n    if (parentTaskDefinition !== undefined) {\n      taskDefinition = new task_definitions_1.OverriddenTaskDefinition(parentTaskDefinition, isSubtask);\n    } else {\n      taskDefinition = new task_definitions_1.SimpleTaskDefinition(name, isSubtask);\n    }\n\n    if (descriptionOrAction instanceof Function) {\n      action = descriptionOrAction;\n      descriptionOrAction = undefined;\n    }\n\n    if (descriptionOrAction !== undefined) {\n      taskDefinition.setDescription(descriptionOrAction);\n    }\n\n    if (action !== undefined) {\n      taskDefinition.setAction(action);\n    }\n\n    this._tasks[name] = taskDefinition;\n    return taskDefinition;\n  }\n\n}\n\nexports.TasksDSL = TasksDSL;","map":{"version":3,"mappings":";;;;;;;AAOA;AAKA;;;;;;AAIA,MAAaA,QAAb,CAAqB;EAArBC;IACkB,oBAAe,KAAKC,OAApB;IAEC,cAAmB,EAAnB;EA8HlB;;EA5FQC,IAAI,CACTC,IADS,EAETC,mBAFS,EAGTC,MAHS,EAGiB;IAE1B,OAAO,KAAKC,QAAL,CAAcH,IAAd,EAAoBC,mBAApB,EAAyCC,MAAzC,EAAiD,KAAjD,CAAP;EACD;;EAkCMJ,OAAO,CACZE,IADY,EAEZC,mBAFY,EAGZC,MAHY,EAGc;IAE1B,OAAO,KAAKC,QAAL,CAAcH,IAAd,EAAoBC,mBAApB,EAAyCC,MAAzC,EAAiD,IAAjD,CAAP;EACD;EAED;;;;;;;EAKOE,kBAAkB;IACvB,OAAO,KAAKC,MAAZ;EACD;;EAEOF,QAAQ,CACdH,IADc,EAEdC,mBAFc,EAGdC,MAHc,EAIdI,SAJc,EAIK;IAEnB,MAAMC,oBAAoB,GAAG,KAAKF,MAAL,CAAYL,IAAZ,CAA7B;IAEA,IAAIQ,cAAJ;;IAEA,IAAID,oBAAoB,KAAKE,SAA7B,EAAwC;MACtCD,cAAc,GAAG,IAAIE,2CAAJ,CACfH,oBADe,EAEfD,SAFe,CAAjB;IAID,CALD,MAKO;MACLE,cAAc,GAAG,IAAIE,uCAAJ,CAAyBV,IAAzB,EAA+BM,SAA/B,CAAjB;IACD;;IAED,IAAIL,mBAAmB,YAAYU,QAAnC,EAA6C;MAC3CT,MAAM,GAAGD,mBAAT;MACAA,mBAAmB,GAAGQ,SAAtB;IACD;;IAED,IAAIR,mBAAmB,KAAKQ,SAA5B,EAAuC;MACrCD,cAAc,CAACI,cAAf,CAA8BX,mBAA9B;IACD;;IAED,IAAIC,MAAM,KAAKO,SAAf,EAA0B;MACxBD,cAAc,CAACK,SAAf,CAAyBX,MAAzB;IACD;;IAED,KAAKG,MAAL,CAAYL,IAAZ,IAAoBQ,cAApB;IACA,OAAOA,cAAP;EACD;;AAhIkB;;AAArBM","names":["TasksDSL","constructor","subtask","task","name","descriptionOrAction","action","_addTask","getTaskDefinitions","_tasks","isSubtask","parentTaskDefinition","taskDefinition","undefined","task_definitions_1","Function","setDescription","setAction","exports"],"sourceRoot":"","sources":["../../../src/internal/core/tasks/dsl.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}