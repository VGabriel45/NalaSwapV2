{"ast":null,"code":"'use strict';\n\nconst Dispatcher = require('./dispatcher');\n\nconst {\n  ClientDestroyedError,\n  ClientClosedError,\n  InvalidArgumentError\n} = require('./core/errors');\n\nconst FixedQueue = require('./node/fixed-queue');\n\nconst {\n  kConnected,\n  kSize,\n  kRunning,\n  kPending,\n  kQueued,\n  kBusy,\n  kFree,\n  kUrl\n} = require('./core/symbols');\n\nconst PoolStats = require('./pool-stats');\n\nconst kClients = Symbol('clients');\nconst kNeedDrain = Symbol('needDrain');\nconst kQueue = Symbol('queue');\nconst kDestroyed = Symbol('destroyed');\nconst kClosedPromise = Symbol('closed promise');\nconst kClosedResolve = Symbol('closed resolve');\nconst kOnDrain = Symbol('onDrain');\nconst kOnConnect = Symbol('onConnect');\nconst kOnDisconnect = Symbol('onDisconnect');\nconst kOnConnectionError = Symbol('onConnectionError');\nconst kGetDispatcher = Symbol('get dispatcher');\nconst kAddClient = Symbol('add client');\nconst kRemoveClient = Symbol('remove client');\nconst kStats = Symbol('stats');\n\nclass PoolBase extends Dispatcher {\n  constructor() {\n    super();\n    this[kQueue] = new FixedQueue();\n    this[kClosedPromise] = null;\n    this[kClosedResolve] = null;\n    this[kDestroyed] = false;\n    this[kClients] = [];\n    this[kNeedDrain] = false;\n    this[kQueued] = 0;\n    const pool = this;\n\n    this[kOnDrain] = function onDrain(origin, targets) {\n      const queue = pool[kQueue];\n      let needDrain = false;\n\n      while (!needDrain) {\n        const item = queue.shift();\n\n        if (!item) {\n          break;\n        }\n\n        pool[kQueued]--;\n        needDrain = !this.dispatch(item.opts, item.handler);\n      }\n\n      this[kNeedDrain] = needDrain;\n\n      if (!this[kNeedDrain] && pool[kNeedDrain]) {\n        pool[kNeedDrain] = false;\n        pool.emit('drain', origin, [pool, ...targets]);\n      }\n\n      if (pool[kClosedResolve] && queue.isEmpty()) {\n        Promise.all(pool[kClients].map(c => c.close())).then(pool[kClosedResolve]);\n      }\n    };\n\n    this[kOnConnect] = (origin, targets) => {\n      pool.emit('connect', origin, [pool, ...targets]);\n    };\n\n    this[kOnDisconnect] = (origin, targets, err) => {\n      pool.emit('disconnect', origin, [pool, ...targets], err);\n    };\n\n    this[kOnConnectionError] = (origin, targets, err) => {\n      pool.emit('connectionError', origin, [pool, ...targets], err);\n    };\n\n    this[kStats] = new PoolStats(this);\n  }\n\n  get [kBusy]() {\n    return this[kNeedDrain];\n  }\n\n  get [kConnected]() {\n    return this[kClients].filter(client => client[kConnected]).length;\n  }\n\n  get [kFree]() {\n    return this[kClients].filter(client => client[kConnected] && !client[kNeedDrain]).length;\n  }\n\n  get [kPending]() {\n    let ret = this[kQueued];\n\n    for (const {\n      [kPending]: pending\n    } of this[kClients]) {\n      ret += pending;\n    }\n\n    return ret;\n  }\n\n  get [kRunning]() {\n    let ret = 0;\n\n    for (const {\n      [kRunning]: running\n    } of this[kClients]) {\n      ret += running;\n    }\n\n    return ret;\n  }\n\n  get [kSize]() {\n    let ret = this[kQueued];\n\n    for (const {\n      [kSize]: size\n    } of this[kClients]) {\n      ret += size;\n    }\n\n    return ret;\n  }\n\n  get stats() {\n    return this[kStats];\n  }\n\n  get destroyed() {\n    return this[kDestroyed];\n  }\n\n  get closed() {\n    return this[kClosedPromise] != null;\n  }\n\n  close(cb) {\n    try {\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError();\n      }\n\n      if (!this[kClosedPromise]) {\n        if (this[kQueue].isEmpty()) {\n          this[kClosedPromise] = Promise.all(this[kClients].map(c => c.close()));\n        } else {\n          this[kClosedPromise] = new Promise(resolve => {\n            this[kClosedResolve] = resolve;\n          });\n        }\n\n        this[kClosedPromise] = this[kClosedPromise].then(() => {\n          this[kDestroyed] = true;\n        });\n      }\n\n      if (cb) {\n        this[kClosedPromise].then(() => cb(null, null));\n      } else {\n        return this[kClosedPromise];\n      }\n    } catch (err) {\n      if (cb) {\n        cb(err);\n      } else {\n        return Promise.reject(err);\n      }\n    }\n  }\n\n  destroy(err, cb) {\n    this[kDestroyed] = true;\n\n    if (typeof err === 'function') {\n      cb = err;\n      err = null;\n    }\n\n    if (!err) {\n      err = new ClientDestroyedError();\n    }\n\n    while (true) {\n      const item = this[kQueue].shift();\n\n      if (!item) {\n        break;\n      }\n\n      item.handler.onError(err);\n    }\n\n    const promise = Promise.all(this[kClients].map(c => c.destroy(err)));\n\n    if (cb) {\n      promise.then(() => cb(null, null));\n    } else {\n      return promise;\n    }\n  }\n\n  dispatch(opts, handler) {\n    if (!handler || typeof handler !== 'object') {\n      throw new InvalidArgumentError('handler must be an object');\n    }\n\n    try {\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError();\n      }\n\n      if (this[kClosedPromise]) {\n        throw new ClientClosedError();\n      }\n\n      const dispatcher = this[kGetDispatcher]();\n\n      if (!dispatcher) {\n        this[kNeedDrain] = true;\n        this[kQueue].push({\n          opts,\n          handler\n        });\n        this[kQueued]++;\n      } else if (!dispatcher.dispatch(opts, handler)) {\n        dispatcher[kNeedDrain] = true;\n        this[kNeedDrain] = !this[kGetDispatcher]();\n      }\n    } catch (err) {\n      if (typeof handler.onError !== 'function') {\n        throw new InvalidArgumentError('invalid onError method');\n      }\n\n      handler.onError(err);\n    }\n\n    return !this[kNeedDrain];\n  }\n\n  [kAddClient](client) {\n    client.on('drain', this[kOnDrain]).on('connect', this[kOnConnect]).on('disconnect', this[kOnDisconnect]).on('connectionError', this[kOnConnectionError]);\n    this[kClients].push(client);\n\n    if (this[kNeedDrain]) {\n      process.nextTick(() => {\n        if (this[kNeedDrain]) {\n          this[kOnDrain](client[kUrl], [this, client]);\n        }\n      });\n    }\n\n    return this;\n  }\n\n  [kRemoveClient](client) {\n    client.close(() => {\n      const idx = this[kClients].indexOf(client);\n\n      if (idx !== -1) {\n        this[kClients].splice(idx, 1);\n      }\n    });\n    this[kNeedDrain] = this[kClients].some(dispatcher => !dispatcher[kNeedDrain] && dispatcher.closed !== true && dispatcher.destroyed !== true);\n  }\n\n}\n\nmodule.exports = {\n  PoolBase,\n  kClients,\n  kNeedDrain,\n  kAddClient,\n  kRemoveClient,\n  kGetDispatcher\n};","map":{"version":3,"names":["Dispatcher","require","ClientDestroyedError","ClientClosedError","InvalidArgumentError","FixedQueue","kConnected","kSize","kRunning","kPending","kQueued","kBusy","kFree","kUrl","PoolStats","kClients","Symbol","kNeedDrain","kQueue","kDestroyed","kClosedPromise","kClosedResolve","kOnDrain","kOnConnect","kOnDisconnect","kOnConnectionError","kGetDispatcher","kAddClient","kRemoveClient","kStats","PoolBase","constructor","pool","onDrain","origin","targets","queue","needDrain","item","shift","dispatch","opts","handler","emit","isEmpty","Promise","all","map","c","close","then","err","filter","client","length","ret","pending","running","size","stats","destroyed","closed","cb","resolve","reject","destroy","onError","promise","dispatcher","push","on","process","nextTick","idx","indexOf","splice","some","module","exports"],"sources":["/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/node_modules/undici/lib/pool-base.js"],"sourcesContent":["'use strict'\n\nconst Dispatcher = require('./dispatcher')\nconst {\n  ClientDestroyedError,\n  ClientClosedError,\n  InvalidArgumentError\n} = require('./core/errors')\nconst FixedQueue = require('./node/fixed-queue')\nconst { kConnected, kSize, kRunning, kPending, kQueued, kBusy, kFree, kUrl } = require('./core/symbols')\nconst PoolStats = require('./pool-stats')\n\nconst kClients = Symbol('clients')\nconst kNeedDrain = Symbol('needDrain')\nconst kQueue = Symbol('queue')\nconst kDestroyed = Symbol('destroyed')\nconst kClosedPromise = Symbol('closed promise')\nconst kClosedResolve = Symbol('closed resolve')\nconst kOnDrain = Symbol('onDrain')\nconst kOnConnect = Symbol('onConnect')\nconst kOnDisconnect = Symbol('onDisconnect')\nconst kOnConnectionError = Symbol('onConnectionError')\nconst kGetDispatcher = Symbol('get dispatcher')\nconst kAddClient = Symbol('add client')\nconst kRemoveClient = Symbol('remove client')\nconst kStats = Symbol('stats')\n\nclass PoolBase extends Dispatcher {\n  constructor () {\n    super()\n\n    this[kQueue] = new FixedQueue()\n    this[kClosedPromise] = null\n    this[kClosedResolve] = null\n    this[kDestroyed] = false\n    this[kClients] = []\n    this[kNeedDrain] = false\n    this[kQueued] = 0\n\n    const pool = this\n\n    this[kOnDrain] = function onDrain (origin, targets) {\n      const queue = pool[kQueue]\n\n      let needDrain = false\n\n      while (!needDrain) {\n        const item = queue.shift()\n        if (!item) {\n          break\n        }\n        pool[kQueued]--\n        needDrain = !this.dispatch(item.opts, item.handler)\n      }\n\n      this[kNeedDrain] = needDrain\n\n      if (!this[kNeedDrain] && pool[kNeedDrain]) {\n        pool[kNeedDrain] = false\n        pool.emit('drain', origin, [pool, ...targets])\n      }\n\n      if (pool[kClosedResolve] && queue.isEmpty()) {\n        Promise\n          .all(pool[kClients].map(c => c.close()))\n          .then(pool[kClosedResolve])\n      }\n    }\n\n    this[kOnConnect] = (origin, targets) => {\n      pool.emit('connect', origin, [pool, ...targets])\n    }\n\n    this[kOnDisconnect] = (origin, targets, err) => {\n      pool.emit('disconnect', origin, [pool, ...targets], err)\n    }\n\n    this[kOnConnectionError] = (origin, targets, err) => {\n      pool.emit('connectionError', origin, [pool, ...targets], err)\n    }\n\n    this[kStats] = new PoolStats(this)\n  }\n\n  get [kBusy] () {\n    return this[kNeedDrain]\n  }\n\n  get [kConnected] () {\n    return this[kClients].filter(client => client[kConnected]).length\n  }\n\n  get [kFree] () {\n    return this[kClients].filter(client => client[kConnected] && !client[kNeedDrain]).length\n  }\n\n  get [kPending] () {\n    let ret = this[kQueued]\n    for (const { [kPending]: pending } of this[kClients]) {\n      ret += pending\n    }\n    return ret\n  }\n\n  get [kRunning] () {\n    let ret = 0\n    for (const { [kRunning]: running } of this[kClients]) {\n      ret += running\n    }\n    return ret\n  }\n\n  get [kSize] () {\n    let ret = this[kQueued]\n    for (const { [kSize]: size } of this[kClients]) {\n      ret += size\n    }\n    return ret\n  }\n\n  get stats () {\n    return this[kStats]\n  }\n\n  get destroyed () {\n    return this[kDestroyed]\n  }\n\n  get closed () {\n    return this[kClosedPromise] != null\n  }\n\n  close (cb) {\n    try {\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError()\n      }\n\n      if (!this[kClosedPromise]) {\n        if (this[kQueue].isEmpty()) {\n          this[kClosedPromise] = Promise.all(this[kClients].map(c => c.close()))\n        } else {\n          this[kClosedPromise] = new Promise((resolve) => {\n            this[kClosedResolve] = resolve\n          })\n        }\n        this[kClosedPromise] = this[kClosedPromise].then(() => {\n          this[kDestroyed] = true\n        })\n      }\n\n      if (cb) {\n        this[kClosedPromise].then(() => cb(null, null))\n      } else {\n        return this[kClosedPromise]\n      }\n    } catch (err) {\n      if (cb) {\n        cb(err)\n      } else {\n        return Promise.reject(err)\n      }\n    }\n  }\n\n  destroy (err, cb) {\n    this[kDestroyed] = true\n\n    if (typeof err === 'function') {\n      cb = err\n      err = null\n    }\n\n    if (!err) {\n      err = new ClientDestroyedError()\n    }\n\n    while (true) {\n      const item = this[kQueue].shift()\n      if (!item) {\n        break\n      }\n      item.handler.onError(err)\n    }\n\n    const promise = Promise.all(this[kClients].map(c => c.destroy(err)))\n    if (cb) {\n      promise.then(() => cb(null, null))\n    } else {\n      return promise\n    }\n  }\n\n  dispatch (opts, handler) {\n    if (!handler || typeof handler !== 'object') {\n      throw new InvalidArgumentError('handler must be an object')\n    }\n\n    try {\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError()\n      }\n\n      if (this[kClosedPromise]) {\n        throw new ClientClosedError()\n      }\n\n      const dispatcher = this[kGetDispatcher]()\n\n      if (!dispatcher) {\n        this[kNeedDrain] = true\n        this[kQueue].push({ opts, handler })\n        this[kQueued]++\n      } else if (!dispatcher.dispatch(opts, handler)) {\n        dispatcher[kNeedDrain] = true\n        this[kNeedDrain] = !this[kGetDispatcher]()\n      }\n    } catch (err) {\n      if (typeof handler.onError !== 'function') {\n        throw new InvalidArgumentError('invalid onError method')\n      }\n\n      handler.onError(err)\n    }\n\n    return !this[kNeedDrain]\n  }\n\n  [kAddClient] (client) {\n    client\n      .on('drain', this[kOnDrain])\n      .on('connect', this[kOnConnect])\n      .on('disconnect', this[kOnDisconnect])\n      .on('connectionError', this[kOnConnectionError])\n\n    this[kClients].push(client)\n\n    if (this[kNeedDrain]) {\n      process.nextTick(() => {\n        if (this[kNeedDrain]) {\n          this[kOnDrain](client[kUrl], [this, client])\n        }\n      })\n    }\n\n    return this\n  }\n\n  [kRemoveClient] (client) {\n    client.close(() => {\n      const idx = this[kClients].indexOf(client)\n      if (idx !== -1) {\n        this[kClients].splice(idx, 1)\n      }\n    })\n\n    this[kNeedDrain] = this[kClients].some(dispatcher => (\n      !dispatcher[kNeedDrain] &&\n      dispatcher.closed !== true &&\n      dispatcher.destroyed !== true\n    ))\n  }\n}\n\nmodule.exports = {\n  PoolBase,\n  kClients,\n  kNeedDrain,\n  kAddClient,\n  kRemoveClient,\n  kGetDispatcher\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}