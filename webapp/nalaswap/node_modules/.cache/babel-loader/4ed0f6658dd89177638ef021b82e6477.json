{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst config_env_1 = require(\"../internal/core/config/config-env\");\n\nconst global_dir_1 = require(\"../internal/util/global-dir\");\n\nconst task_names_1 = require(\"./task-names\");\n\n(0, config_env_1.subtask)(task_names_1.TASK_CLEAN_GLOBAL, async () => {\n  const globalCacheDir = await (0, global_dir_1.getCacheDir)();\n  await fs_extra_1.default.emptyDir(globalCacheDir);\n});\n(0, config_env_1.task)(task_names_1.TASK_CLEAN, \"Clears the cache and deletes all artifacts\").addFlag(\"global\", \"Clear the global cache\").setAction(async (_ref, _ref2) => {\n  let {\n    global\n  } = _ref;\n  let {\n    config,\n    run\n  } = _ref2;\n\n  if (global) {\n    return run(task_names_1.TASK_CLEAN_GLOBAL);\n  }\n\n  await fs_extra_1.default.emptyDir(config.paths.cache);\n  await fs_extra_1.default.remove(config.paths.artifacts);\n});","map":{"version":3,"mappings":";;;;;;;;;;;;AAAA;;AAEA;;AACA;;AAEA;;AAEA,0BAAQA,8BAAR,EAA2B,YAAW;EACpC,MAAMC,cAAc,GAAG,MAAM,+BAA7B;EACA,MAAMC,mBAAQC,QAAR,CAAiBF,cAAjB,CAAN;AACD,CAHD;AAKA,uBAAKD,uBAAL,EAAiB,4CAAjB,EACGI,OADH,CACW,QADX,EACqB,wBADrB,EAEGC,SAFH,CAEa,uBAA2D;EAAA,IAApD;IAAEC;EAAF,CAAoD;EAAA,IAAnB;IAAEC,MAAF;IAAUC;EAAV,CAAmB;;EACpE,IAAIF,MAAJ,EAAY;IACV,OAAOE,GAAG,CAACR,8BAAD,CAAV;EACD;;EACD,MAAME,mBAAQC,QAAR,CAAiBI,MAAM,CAACE,KAAP,CAAaC,KAA9B,CAAN;EACA,MAAMR,mBAAQS,MAAR,CAAeJ,MAAM,CAACE,KAAP,CAAaG,SAA5B,CAAN;AACD,CARH","names":["task_names_1","globalCacheDir","fs_extra_1","emptyDir","addFlag","setAction","global","config","run","paths","cache","remove","artifacts"],"sourceRoot":"","sources":["../src/builtin-tasks/clean.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}