{"ast":null,"code":"var _jsxFileName = \"/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/src/pages/NftsPage.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport nftAbi from \"../ABIS/NFTCollection.json\";\nimport { BigNumber, Contract, ethers, utils } from 'ethers';\nimport { useEffect, useState, Fragment } from \"react\";\nimport Box from '@mui/material/Box';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport contractAddresses from \"../utils/contractsAddresses.json\";\nimport Button from '@mui/material/Button';\nimport NFTBalance from \"web3uikit\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function StakePage() {\n  _s();\n\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [ownedNfts, setOwnedNfts] = useState([]);\n  const nftAddress = contractAddresses.nftCollectionAddress;\n  useEffect(() => {\n    const displayAndSet = async () => {\n      setOwnedNfts(await displayOwnedNfts());\n    };\n\n    displayAndSet();\n  }, []);\n\n  const getOwnedNFTS = async () => {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      let nftArr = [];\n\n      if (signer) {\n        const nftContract = new ethers.Contract(nftAddress, nftAbi, signer);\n        const ownedNftsCount = parseInt(await nftContract.balanceOf(signer.getAddress()));\n\n        for (let index = 0; index < ownedNftsCount; index++) {\n          let nftId = await nftContract.tokenOfOwnerByIndex(signer.getAddress(), index);\n          nftArr.push(nftId);\n        }\n\n        return nftArr;\n      }\n    }\n  };\n\n  const displayOwnedNfts = async () => {\n    let ids = await getOwnedNFTS();\n    let nftMetadataArr = [];\n\n    for (let index = 0; index < ids.length; index++) {\n      const response = await fetch(`https://gateway.pinata.cloud/ipfs/QmSxkTx7LDNvYYJFFtSVDafd4DD4sAUYD34YydcTML6N7X/${ids[index]}.json`);\n      const responseJson = await response.json();\n      nftMetadataArr.push(responseJson);\n    }\n\n    return nftMetadataArr;\n  };\n\n  const mintNft = async () => {\n    if (typeof window.ethereum !== 'undefined') {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      if (signer) {\n        const nftContract = new ethers.Contract(nftAddress, nftAbi, signer);\n\n        try {\n          const tx = await nftContract.connect(signer).mint(signer.getAddress(), 1, {\n            value: ethers.utils.parseEther(\"1\"),\n            from: signer.getAddress()\n          });\n          tx.wait();\n          console.log(tx);\n        } catch (error) {\n          console.log(\"Transaction error\");\n        }\n      } else {\n        setErrorMessage(\"Cannot stake 0 tokens\");\n      }\n    }\n  };\n\n  const buttons = [/*#__PURE__*/_jsxDEV(Button, {\n    onClick: () => mintNft(),\n    children: \"Mint\"\n  }, \"Mint\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this)];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"test\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n      size: \"large\",\n      \"aria-label\": \"large button group\",\n      children: buttons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), \"My Nfts\", /*#__PURE__*/_jsxDEV(NFTBalance, {\n      address: \"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\",\n      chain: \"bsc\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\"\n      },\n      children: ownedNfts.map(nft => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: nft.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          style: {\n            width: \"100px\",\n            borderRadius: \"10px\"\n          },\n          src: `https://gateway.pinata.cloud/ipfs/QmcEfnhCfPn5SFA9PQ6YRELsTrDRSkapYiHwEAifuWtNQp/${nft.edition}.png`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(StakePage, \"XWktUinxyM4q1aGn/qjPBzKVFNs=\");\n\n_c = StakePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StakePage\");","map":{"version":3,"names":["React","nftAbi","BigNumber","Contract","ethers","utils","useEffect","useState","Fragment","Box","ButtonGroup","contractAddresses","Button","NFTBalance","StakePage","errorMessage","setErrorMessage","ownedNfts","setOwnedNfts","nftAddress","nftCollectionAddress","displayAndSet","displayOwnedNfts","getOwnedNFTS","window","ethereum","provider","providers","Web3Provider","signer","getSigner","nftArr","nftContract","ownedNftsCount","parseInt","balanceOf","getAddress","index","nftId","tokenOfOwnerByIndex","push","ids","nftMetadataArr","length","response","fetch","responseJson","json","mintNft","tx","connect","mint","value","parseEther","from","wait","console","log","error","buttons","display","flexDirection","justifyContent","map","nft","name","width","borderRadius","edition"],"sources":["/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/src/pages/NftsPage.js"],"sourcesContent":["import * as React from 'react';\nimport nftAbi from \"../ABIS/NFTCollection.json\";\nimport { BigNumber, Contract, ethers, utils } from 'ethers';\nimport {useEffect, useState, Fragment} from \"react\";\nimport Box from '@mui/material/Box';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport contractAddresses from \"../utils/contractsAddresses.json\";\nimport Button from '@mui/material/Button';\nimport NFTBalance from \"web3uikit\";\n\nexport default function StakePage () {\n\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [ownedNfts, setOwnedNfts] = useState([]);\n\n    const nftAddress = contractAddresses.nftCollectionAddress;\n\n    useEffect(() => {\n        const displayAndSet = async () => {setOwnedNfts(await displayOwnedNfts())};\n        displayAndSet();\n    }, [])\n\n    const getOwnedNFTS = async () => {\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner();\n            let nftArr = [];\n            if (signer) {\n              const nftContract = new ethers.Contract(nftAddress, nftAbi, signer);\n              const ownedNftsCount = parseInt(await nftContract.balanceOf(signer.getAddress()));\n              for (let index = 0; index < ownedNftsCount; index++) {\n                    let nftId = await nftContract.tokenOfOwnerByIndex(signer.getAddress(), index);\n                    nftArr.push(nftId);                  \n              }\n              return nftArr;\n            }\n        }\n    }\n\n     const displayOwnedNfts = async () => {\n        let ids = await getOwnedNFTS();\n        let nftMetadataArr = [];\n        for (let index = 0; index < ids.length; index++) {\n            const response = await fetch(`https://gateway.pinata.cloud/ipfs/QmSxkTx7LDNvYYJFFtSVDafd4DD4sAUYD34YydcTML6N7X/${ids[index]}.json`)\n            const responseJson = await response.json();\n            nftMetadataArr.push(responseJson);\n        }\n        return nftMetadataArr;\n    }\n\n    const mintNft = async () => {\n        if (typeof window.ethereum !== 'undefined') {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            if (signer) {\n              const nftContract = new ethers.Contract(nftAddress, nftAbi, signer);\n              try {\n                const tx = await nftContract.connect(signer).mint(\n                    signer.getAddress(),\n                    1,\n                    {value: ethers.utils.parseEther(\"1\"), from: signer.getAddress()}\n                )\n                tx.wait();\n                console.log(tx);\n                } catch (error) {\n                    console.log(\"Transaction error\");\n                }\n            } else {\n                setErrorMessage(\"Cannot stake 0 tokens\");\n            }\n        }\n        \n    }\n\n    const buttons = [\n        <Button key=\"Mint\" onClick={() => mintNft()}>Mint</Button>,\n    ];\n\n    return (\n        <>\n            <h1>test</h1>\n            <ButtonGroup size=\"large\" aria-label=\"large button group\">\n                {buttons}\n            </ButtonGroup>\n            My Nfts\n            <NFTBalance\n                address=\"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\"\n                chain=\"bsc\"\n            />\n            <div style={{display: \"flex\", flexDirection:\"row\", justifyContent: \"space-between\"}}>\n                {ownedNfts.map(nft => \n                    <div>\n                        <p>{nft.name}</p>\n                        <img style={{width: \"100px\", borderRadius: \"10px\"}} src={`https://gateway.pinata.cloud/ipfs/QmcEfnhCfPn5SFA9PQ6YRELsTrDRSkapYiHwEAifuWtNQp/${nft.edition}.png`}/>\n                    </div>\n                )}\n            </div>\n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}