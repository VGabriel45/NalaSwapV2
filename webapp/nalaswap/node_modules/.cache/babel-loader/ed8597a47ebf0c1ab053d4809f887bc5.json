{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst os_1 = __importDefault(require(\"os\"));\n\nconst chalk_1 = __importDefault(require(\"chalk\"));\n\nconst child_process_1 = require(\"child_process\");\n\nconst debug_1 = __importDefault(require(\"debug\"));\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst path_1 = __importDefault(require(\"path\"));\n\nconst semver_1 = __importDefault(require(\"semver\"));\n\nconst aggregate_error_1 = __importDefault(require(\"aggregate-error\"));\n\nconst artifacts_1 = require(\"../internal/artifacts\");\n\nconst config_env_1 = require(\"../internal/core/config/config-env\");\n\nconst errors_1 = require(\"../internal/core/errors\");\n\nconst errors_list_1 = require(\"../internal/core/errors-list\");\n\nconst compilation_job_1 = require(\"../internal/solidity/compilation-job\");\n\nconst compiler_1 = require(\"../internal/solidity/compiler\");\n\nconst compiler_input_1 = require(\"../internal/solidity/compiler/compiler-input\");\n\nconst downloader_1 = require(\"../internal/solidity/compiler/downloader\");\n\nconst dependencyGraph_1 = require(\"../internal/solidity/dependencyGraph\");\n\nconst parse_1 = require(\"../internal/solidity/parse\");\n\nconst resolver_1 = require(\"../internal/solidity/resolver\");\n\nconst glob_1 = require(\"../internal/util/glob\");\n\nconst global_dir_1 = require(\"../internal/util/global-dir\");\n\nconst strings_1 = require(\"../internal/util/strings\");\n\nconst builtin_tasks_1 = require(\"../types/builtin-tasks\");\n\nconst contract_names_1 = require(\"../utils/contract-names\");\n\nconst source_names_1 = require(\"../utils/source-names\");\n\nconst task_names_1 = require(\"./task-names\");\n\nconst solidity_files_cache_1 = require(\"./utils/solidity-files-cache\");\n\nfunction isConsoleLogError(error) {\n  return error.type === \"TypeError\" && typeof error.message === \"string\" && error.message.includes(\"log\") && error.message.includes(\"type(library console)\");\n}\n\nconst log = (0, debug_1.default)(\"hardhat:core:tasks:compile\");\nconst COMPILE_TASK_FIRST_SOLC_VERSION_SUPPORTED = \"0.4.11\";\nconst DEFAULT_CONCURRENCY_LEVEL = Math.max(os_1.default.cpus().length - 1, 1);\n/**\n * Returns a list of absolute paths to all the solidity files in the project.\n * This list doesn't include dependencies, for example solidity files inside\n * node_modules.\n *\n * This is the right task to override to change how the solidity files of the\n * project are obtained.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOURCE_PATHS, async (_, _ref) => {\n  let {\n    config\n  } = _ref;\n  const paths = await (0, glob_1.glob)(path_1.default.join(config.paths.sources, \"**/*.sol\"));\n  return paths;\n});\n/**\n * Receives a list of absolute paths and returns a list of source names\n * corresponding to each path. For example, receives\n * [\"/home/user/project/contracts/Foo.sol\"] and returns\n * [\"contracts/Foo.sol\"]. These source names will be used when the solc input\n * is generated.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOURCE_NAMES).addParam(\"sourcePaths\", undefined, undefined, config_env_1.types.any).setAction(async (_ref2, _ref3) => {\n  let {\n    sourcePaths\n  } = _ref2;\n  let {\n    config\n  } = _ref3;\n  const sourceNames = await Promise.all(sourcePaths.map(p => (0, source_names_1.localPathToSourceName)(config.paths.root, p)));\n  return sourceNames;\n});\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_READ_FILE).addParam(\"absolutePath\", undefined, undefined, config_env_1.types.string).setAction(async _ref4 => {\n  let {\n    absolutePath\n  } = _ref4;\n  const content = await fs_extra_1.default.readFile(absolutePath, {\n    encoding: \"utf8\"\n  });\n  return content;\n});\n/**\n * Receives a list of source names and returns a dependency graph. This task\n * is responsible for both resolving dependencies (like getting files from\n * node_modules) and generating the graph.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_DEPENDENCY_GRAPH).addParam(\"sourceNames\", undefined, undefined, config_env_1.types.any).addOptionalParam(\"solidityFilesCache\", undefined, undefined, config_env_1.types.any).setAction(async (_ref5, _ref6) => {\n  let {\n    sourceNames,\n    solidityFilesCache\n  } = _ref5;\n  let {\n    config,\n    run\n  } = _ref6;\n  const parser = new parse_1.Parser(solidityFilesCache);\n  const resolver = new resolver_1.Resolver(config.paths.root, parser, absolutePath => run(task_names_1.TASK_COMPILE_SOLIDITY_READ_FILE, {\n    absolutePath\n  }));\n  const resolvedFiles = await Promise.all(sourceNames.map(sn => resolver.resolveSourceName(sn)));\n  const dependencyGraph = await dependencyGraph_1.DependencyGraph.createFromResolvedFiles(resolver, resolvedFiles);\n  return dependencyGraph;\n});\n/**\n * Receives a dependency graph and a file in it, and returns the compilation\n * job for that file. The compilation job should have everything that is\n * necessary to compile that file: a compiler config to be used and a list of\n * files to use as input of the compilation.\n *\n * If the file cannot be compiled, a MatchingCompilerFailure should be\n * returned instead.\n *\n * This is the right task to override to change the compiler configuration.\n * For example, if you want to change the compiler settings when targetting\n * rinkeby, you could do something like this:\n *\n *   const compilationJob = await runSuper();\n *   if (config.network.name === 'rinkeby') {\n *     compilationJob.solidityConfig.settings = newSettings;\n *   }\n *   return compilationJob;\n *\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOB_FOR_FILE).addParam(\"dependencyGraph\", undefined, undefined, config_env_1.types.any).addParam(\"file\", undefined, undefined, config_env_1.types.any).addOptionalParam(\"solidityFilesCache\", undefined, undefined, config_env_1.types.any).setAction(async (_ref7, _ref8) => {\n  let {\n    dependencyGraph,\n    file\n  } = _ref7;\n  let {\n    config\n  } = _ref8;\n  return (0, compilation_job_1.createCompilationJobFromFile)(dependencyGraph, file, config.solidity);\n});\n/**\n * Receives a dependency graph and returns a tuple with two arrays. The first\n * array is a list of CompilationJobsSuccess, where each item has a list of\n * compilation jobs. The second array is a list of CompilationJobsFailure,\n * where each item has a list of files that couldn't be compiled, grouped by\n * the reason for the failure.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOBS).addParam(\"dependencyGraph\", undefined, undefined, config_env_1.types.any).addOptionalParam(\"solidityFilesCache\", undefined, undefined, config_env_1.types.any).setAction(async (_ref9, _ref10) => {\n  let {\n    dependencyGraph,\n    solidityFilesCache\n  } = _ref9;\n  let {\n    run\n  } = _ref10;\n  const connectedComponents = dependencyGraph.getConnectedComponents();\n  log(`The dependency graph was divided in '${connectedComponents.length}' connected components`);\n  const compilationJobsCreationResults = await Promise.all(connectedComponents.map(graph => (0, compilation_job_1.createCompilationJobsFromConnectedComponent)(graph, file => run(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOB_FOR_FILE, {\n    file,\n    dependencyGraph,\n    solidityFilesCache\n  }))));\n  let jobs = [];\n  let errors = [];\n\n  for (const result of compilationJobsCreationResults) {\n    jobs = jobs.concat(result.jobs);\n    errors = errors.concat(result.errors);\n  }\n\n  return {\n    jobs,\n    errors\n  };\n});\n/**\n * Receives a list of compilation jobs and returns a new list where some of\n * the compilation jobs might've been removed.\n *\n * This task can be overriden to change the way the cache is used, or to use\n * a different approach to filtering out compilation jobs.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_FILTER_COMPILATION_JOBS).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"force\", undefined, undefined, config_env_1.types.boolean).addOptionalParam(\"solidityFilesCache\", undefined, undefined, config_env_1.types.any).setAction(async _ref11 => {\n  let {\n    compilationJobs,\n    force,\n    solidityFilesCache\n  } = _ref11;\n  (0, errors_1.assertHardhatInvariant)(solidityFilesCache !== undefined, \"The implementation of this task needs a defined solidityFilesCache\");\n\n  if (force) {\n    log(`force flag enabled, not filtering`);\n    return compilationJobs;\n  }\n\n  const neededCompilationJobs = compilationJobs.filter(job => needsCompilation(job, solidityFilesCache));\n  const jobsFilteredOutCount = compilationJobs.length - neededCompilationJobs.length;\n  log(`'${jobsFilteredOutCount}' jobs were filtered out`);\n  return neededCompilationJobs;\n});\n/**\n * Receives a list of compilation jobs and returns a new list where some of\n * the jobs might've been merged.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_MERGE_COMPILATION_JOBS).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).setAction(async _ref12 => {\n  let {\n    compilationJobs\n  } = _ref12;\n  return (0, compilation_job_1.mergeCompilationJobsWithoutBug)(compilationJobs);\n});\n/**\n * Prints a message when there's nothing to compile.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_NOTHING_TO_COMPILE).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async _ref13 => {\n  let {\n    quiet\n  } = _ref13;\n\n  if (!quiet) {\n    console.log(\"Nothing to compile\");\n  }\n});\n/**\n * Receives a list of compilation jobs and sends each one to be compiled.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_JOBS).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"concurrency\", undefined, DEFAULT_CONCURRENCY_LEVEL, config_env_1.types.int).setAction(async (_ref14, _ref15) => {\n  let {\n    compilationJobs,\n    quiet,\n    concurrency\n  } = _ref14;\n  let {\n    run\n  } = _ref15;\n\n  if (compilationJobs.length === 0) {\n    log(`No compilation jobs to compile`);\n    await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_NOTHING_TO_COMPILE, {\n      quiet\n    });\n    return {\n      artifactsEmittedPerJob: []\n    };\n  }\n\n  log(`Compiling ${compilationJobs.length} jobs`);\n  const versionList = [];\n\n  for (const job of compilationJobs) {\n    const solcVersion = job.getSolcConfig().version;\n\n    if (!versionList.includes(solcVersion)) {\n      // versions older than 0.4.11 don't work with hardhat\n      // see issue https://github.com/nomiclabs/hardhat/issues/2004\n      if (semver_1.default.lt(solcVersion, COMPILE_TASK_FIRST_SOLC_VERSION_SUPPORTED)) {\n        throw new errors_1.HardhatError(errors_list_1.ERRORS.BUILTIN_TASKS.COMPILE_TASK_UNSUPPORTED_SOLC_VERSION, {\n          version: solcVersion,\n          firstSupportedVersion: COMPILE_TASK_FIRST_SOLC_VERSION_SUPPORTED\n        });\n      }\n\n      versionList.push(solcVersion);\n    }\n  }\n  /**\n   * Downloading the same version of a compiler in parallel can cause an\n   * error. When compilation jobs are executed in parallel, there's a chance\n   * that both use the same solc version and trigger this problem. To\n   * prevent that, we pre-download all the necessary compilers before\n   * running the compilation jobs.\n   */\n\n\n  for (const solcVersion of versionList) {\n    await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOLC_BUILD, {\n      solcVersion,\n      quiet: false\n    });\n  }\n\n  const {\n    default: pMap\n  } = await Promise.resolve().then(() => __importStar(require(\"p-map\")));\n  const pMapOptions = {\n    concurrency,\n    stopOnError: false\n  };\n\n  try {\n    const artifactsEmittedPerJob = await pMap(compilationJobs, async (compilationJob, compilationJobIndex) => {\n      const result = await run(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_JOB, {\n        compilationJob,\n        compilationJobs,\n        compilationJobIndex,\n        quiet\n      });\n      return {\n        compilationJob: result.compilationJob,\n        artifactsEmittedPerFile: result.artifactsEmittedPerFile\n      };\n    }, pMapOptions);\n    return {\n      artifactsEmittedPerJob\n    };\n  } catch (e) {\n    if (!(e instanceof aggregate_error_1.default)) {\n      // eslint-disable-next-line @nomiclabs/hardhat-internal-rules/only-hardhat-error\n      throw e;\n    }\n\n    for (const error of e) {\n      if (!errors_1.HardhatError.isHardhatErrorType(error, errors_list_1.ERRORS.BUILTIN_TASKS.COMPILE_FAILURE)) {\n        // eslint-disable-next-line @nomiclabs/hardhat-internal-rules/only-hardhat-error\n        throw error;\n      }\n    } // error is an aggregate error, and all errors are compilation failures\n\n\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.BUILTIN_TASKS.COMPILE_FAILURE);\n  }\n});\n/**\n * Receives a compilation job and returns a CompilerInput.\n *\n * It's not recommended to override this task to modify the solc\n * configuration, override\n * TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOB_FOR_FILE instead.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILER_INPUT).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).setAction(async _ref16 => {\n  let {\n    compilationJob\n  } = _ref16;\n  return (0, compiler_input_1.getInputFromCompilationJob)(compilationJob);\n});\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_DOWNLOAD_COMPILER_START).addParam(\"isCompilerDownloaded\", undefined, undefined, config_env_1.types.boolean).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"solcVersion\", undefined, undefined, config_env_1.types.string).setAction(async _ref17 => {\n  let {\n    isCompilerDownloaded,\n    solcVersion\n  } = _ref17;\n\n  if (isCompilerDownloaded) {\n    return;\n  }\n\n  console.log(`Downloading compiler ${solcVersion}`);\n});\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_DOWNLOAD_COMPILER_END).addParam(\"isCompilerDownloaded\", undefined, undefined, config_env_1.types.boolean).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"solcVersion\", undefined, undefined, config_env_1.types.string).setAction(async _ref18 => {\n  let {} = _ref18;\n});\n/**\n * Receives a solc version and returns a path to a solc binary or to a\n * downloaded solcjs module. It also returns a flag indicating if the returned\n * path corresponds to solc or solcjs.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOLC_BUILD).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"solcVersion\", undefined, undefined, config_env_1.types.string).setAction(async (_ref19, _ref20) => {\n  let {\n    quiet,\n    solcVersion\n  } = _ref19;\n  let {\n    run\n  } = _ref20;\n  const compilersCache = await (0, global_dir_1.getCompilersDir)();\n  const downloader = new downloader_1.CompilerDownloader(compilersCache);\n  const isCompilerDownloaded = await downloader.isCompilerDownloaded(solcVersion);\n  const {\n    longVersion,\n    platform: desiredPlatform\n  } = await downloader.getCompilerBuild(solcVersion);\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_DOWNLOAD_COMPILER_START, {\n    solcVersion,\n    isCompilerDownloaded,\n    quiet\n  });\n  let compilerPath;\n  let platform;\n  let nativeBinaryFailed = false;\n  const compilerPathResult = await downloader.getDownloadedCompilerPath(solcVersion);\n\n  if (compilerPathResult === undefined) {\n    if (desiredPlatform === downloader_1.CompilerPlatform.WASM) {\n      // if we were trying to download solcjs and it failed, there's nothing\n      // we can do\n      throw new errors_1.HardhatError(errors_list_1.ERRORS.SOLC.CANT_GET_COMPILER, {\n        version: solcVersion\n      });\n    }\n\n    nativeBinaryFailed = true;\n  } else {\n    compilerPath = compilerPathResult.compilerPath; // when using a native binary, check that it works correctly\n    // it it doesn't, force the downloader to use solcjs\n\n    if (compilerPathResult.platform !== downloader_1.CompilerPlatform.WASM) {\n      log(\"Checking native solc binary\");\n      const solcBinaryWorks = await checkSolcBinary(compilerPathResult.compilerPath);\n\n      if (!solcBinaryWorks) {\n        log(\"Native solc binary doesn't work, using solcjs instead\");\n        nativeBinaryFailed = true;\n      }\n    } else {\n      platform = downloader_1.CompilerPlatform.WASM;\n    }\n  }\n\n  if (nativeBinaryFailed) {\n    const solcJsDownloader = new downloader_1.CompilerDownloader(compilersCache, {\n      forceSolcJs: true\n    });\n    const solcjsCompilerPath = await solcJsDownloader.getDownloadedCompilerPath(solcVersion);\n\n    if (solcjsCompilerPath === undefined) {\n      throw new errors_1.HardhatError(errors_list_1.ERRORS.SOLC.CANT_GET_COMPILER, {\n        version: solcVersion\n      });\n    }\n\n    compilerPath = solcjsCompilerPath.compilerPath;\n    platform = downloader_1.CompilerPlatform.WASM;\n  }\n\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_DOWNLOAD_COMPILER_END, {\n    solcVersion,\n    isCompilerDownloaded,\n    quiet\n  });\n  const isSolcJs = platform === downloader_1.CompilerPlatform.WASM;\n  (0, errors_1.assertHardhatInvariant)(compilerPath !== undefined, \"A compilerPath should be defined at this point\");\n  return {\n    compilerPath,\n    isSolcJs,\n    version: solcVersion,\n    longVersion\n  };\n});\n/**\n * Receives an absolute path to a solcjs module and the input to be compiled,\n * and returns the generated output\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_RUN_SOLCJS).addParam(\"input\", undefined, undefined, config_env_1.types.any).addParam(\"solcJsPath\", undefined, undefined, config_env_1.types.string).setAction(async _ref21 => {\n  let {\n    input,\n    solcJsPath\n  } = _ref21;\n  const compiler = new compiler_1.Compiler(solcJsPath);\n  const output = await compiler.compile(input);\n  return output;\n});\n/**\n * Receives an absolute path to a solc binary and the input to be compiled,\n * and returns the generated output\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_RUN_SOLC).addParam(\"input\", undefined, undefined, config_env_1.types.any).addParam(\"solcPath\", undefined, undefined, config_env_1.types.string).setAction(async _ref22 => {\n  let {\n    input,\n    solcPath\n  } = _ref22;\n  const compiler = new compiler_1.NativeCompiler(solcPath);\n  const output = await compiler.compile(input);\n  return output;\n});\n/**\n * Receives a CompilerInput and a solc version, compiles the input using a native\n * solc binary or, if that's not possible, using solcjs. Returns the generated\n * output.\n *\n * This task can be overriden to change how solc is obtained or used.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_SOLC).addParam(\"input\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"solcVersion\", undefined, undefined, config_env_1.types.string).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobIndex\", undefined, undefined, config_env_1.types.int).setAction(async (_ref23, _ref24) => {\n  let {\n    input,\n    quiet,\n    solcVersion,\n    compilationJob,\n    compilationJobs,\n    compilationJobIndex\n  } = _ref23;\n  let {\n    run\n  } = _ref24;\n  const solcBuild = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOLC_BUILD, {\n    quiet,\n    solcVersion\n  });\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_RUN_COMPILER_START, {\n    compilationJob,\n    compilationJobs,\n    compilationJobIndex,\n    quiet\n  });\n  let output;\n\n  if (solcBuild.isSolcJs) {\n    output = await run(task_names_1.TASK_COMPILE_SOLIDITY_RUN_SOLCJS, {\n      input,\n      solcJsPath: solcBuild.compilerPath\n    });\n  } else {\n    output = await run(task_names_1.TASK_COMPILE_SOLIDITY_RUN_SOLC, {\n      input,\n      solcPath: solcBuild.compilerPath\n    });\n  }\n\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_RUN_COMPILER_END, {\n    compilationJob,\n    compilationJobs,\n    compilationJobIndex,\n    output,\n    quiet\n  });\n  return {\n    output,\n    solcBuild\n  };\n});\n/**\n * This task is just a proxy to the task that compiles with solc.\n *\n * Override this to use a different task to compile a job.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE, async (taskArgs, _ref25) => {\n  let {\n    run\n  } = _ref25;\n  return run(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_SOLC, taskArgs);\n});\n/**\n * Receives a compilation output and prints its errors and any other\n * information useful to the user.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_COMPILATION_ERRORS).addParam(\"output\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async _ref26 => {\n  let {\n    output\n  } = _ref26;\n\n  var _a;\n\n  if ((output === null || output === void 0 ? void 0 : output.errors) === undefined) {\n    return;\n  }\n\n  for (const error of output.errors) {\n    if (error.severity === \"error\") {\n      const errorMessage = (_a = getFormattedInternalCompilerErrorMessage(error)) !== null && _a !== void 0 ? _a : error.formattedMessage;\n      console.error(chalk_1.default.red(errorMessage));\n    } else {\n      console.warn(chalk_1.default.yellow(error.formattedMessage));\n    }\n  }\n\n  const hasConsoleErrors = output.errors.some(isConsoleLogError);\n\n  if (hasConsoleErrors) {\n    console.error(chalk_1.default.red(`The console.log call you made isn’t supported. See https://hardhat.org/console-log for the list of supported methods.`));\n    console.log();\n  }\n});\n/**\n * Receives a solc output and checks if there are errors. Throws if there are\n * errors.\n *\n * Override this task to avoid interrupting the compilation process if some\n * job has compilation errors.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_CHECK_ERRORS).addParam(\"output\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async (_ref27, _ref28) => {\n  let {\n    output,\n    quiet\n  } = _ref27;\n  let {\n    run\n  } = _ref28;\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_COMPILATION_ERRORS, {\n    output,\n    quiet\n  });\n\n  if (hasCompilationErrors(output)) {\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.BUILTIN_TASKS.COMPILE_FAILURE);\n  }\n});\n/**\n * Saves to disk the artifacts for a compilation job. These artifacts\n * include the main artifacts, the debug files, and the build info.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_EMIT_ARTIFACTS).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).addParam(\"input\", undefined, undefined, config_env_1.types.any).addParam(\"output\", undefined, undefined, config_env_1.types.any).addParam(\"solcBuild\", undefined, undefined, config_env_1.types.any).setAction(async (_ref29, _ref30) => {\n  let {\n    compilationJob,\n    input,\n    output,\n    solcBuild\n  } = _ref29;\n  let {\n    artifacts,\n    run\n  } = _ref30;\n\n  var _a, _b;\n\n  const pathToBuildInfo = await artifacts.saveBuildInfo(compilationJob.getSolcConfig().version, solcBuild.longVersion, input, output);\n  const artifactsEmittedPerFile = [];\n\n  for (const file of compilationJob.getResolvedFiles()) {\n    log(`Emitting artifacts for file '${file.sourceName}'`);\n\n    if (!compilationJob.emitsArtifacts(file)) {\n      continue;\n    }\n\n    const artifactsEmitted = [];\n\n    for (const [contractName, contractOutput] of Object.entries((_b = (_a = output.contracts) === null || _a === void 0 ? void 0 : _a[file.sourceName]) !== null && _b !== void 0 ? _b : {})) {\n      log(`Emitting artifact for contract '${contractName}'`);\n      const artifact = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_ARTIFACT_FROM_COMPILATION_OUTPUT, {\n        sourceName: file.sourceName,\n        contractName,\n        contractOutput\n      });\n      await artifacts.saveArtifactAndDebugFile(artifact, pathToBuildInfo);\n      artifactsEmitted.push(artifact.contractName);\n    }\n\n    artifactsEmittedPerFile.push({\n      file,\n      artifactsEmitted\n    });\n  }\n\n  return {\n    artifactsEmittedPerFile\n  };\n});\n/**\n * Generates the artifact for contract `contractName` given its compilation\n * output.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_ARTIFACT_FROM_COMPILATION_OUTPUT).addParam(\"sourceName\", undefined, undefined, config_env_1.types.string).addParam(\"contractName\", undefined, undefined, config_env_1.types.string).addParam(\"contractOutput\", undefined, undefined, config_env_1.types.any).setAction(async _ref31 => {\n  let {\n    sourceName,\n    contractName,\n    contractOutput\n  } = _ref31;\n  return (0, artifacts_1.getArtifactFromContractOutput)(sourceName, contractName, contractOutput);\n});\n/**\n * Prints a message before running soljs with some input.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_RUN_COMPILER_START).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobIndex\", undefined, undefined, config_env_1.types.int).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async _ref32 => {\n  let {} = _ref32;\n});\n/**\n * Prints a message after compiling some input\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_RUN_COMPILER_END).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobIndex\", undefined, undefined, config_env_1.types.int).addParam(\"output\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async _ref33 => {\n  let {} = _ref33;\n});\n/**\n * This is an orchestrator task that uses other subtasks to compile a\n * compilation job.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_JOB).addParam(\"compilationJob\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"compilationJobIndex\", undefined, undefined, config_env_1.types.int).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addOptionalParam(\"emitsArtifacts\", undefined, true, config_env_1.types.boolean).setAction(async (_ref34, _ref35) => {\n  let {\n    compilationJob,\n    compilationJobs,\n    compilationJobIndex,\n    quiet,\n    emitsArtifacts\n  } = _ref34;\n  let {\n    run\n  } = _ref35;\n  log(`Compiling job with version '${compilationJob.getSolcConfig().version}'`);\n  const input = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILER_INPUT, {\n    compilationJob\n  });\n  const {\n    output,\n    solcBuild\n  } = await run(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE, {\n    solcVersion: compilationJob.getSolcConfig().version,\n    input,\n    quiet,\n    compilationJob,\n    compilationJobs,\n    compilationJobIndex\n  });\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_CHECK_ERRORS, {\n    output,\n    quiet\n  });\n  let artifactsEmittedPerFile = [];\n\n  if (emitsArtifacts) {\n    artifactsEmittedPerFile = (await run(task_names_1.TASK_COMPILE_SOLIDITY_EMIT_ARTIFACTS, {\n      compilationJob,\n      input,\n      output,\n      solcBuild\n    })).artifactsEmittedPerFile;\n  }\n\n  return {\n    artifactsEmittedPerFile,\n    compilationJob,\n    input,\n    output,\n    solcBuild\n  };\n});\n/**\n * Receives a list of CompilationJobsFailure and throws an error if it's not\n * empty.\n *\n * This task could be overriden to avoid interrupting the compilation if\n * there's some part of the project that can't be compiled.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_HANDLE_COMPILATION_JOBS_FAILURES).addParam(\"compilationJobsCreationErrors\", undefined, undefined, config_env_1.types.any).setAction(async (_ref36, _ref37) => {\n  let {\n    compilationJobsCreationErrors\n  } = _ref36;\n  let {\n    run\n  } = _ref37;\n  const hasErrors = compilationJobsCreationErrors.length > 0;\n\n  if (hasErrors) {\n    log(`There were errors creating the compilation jobs, throwing`);\n    const reasons = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOBS_FAILURE_REASONS, {\n      compilationJobsCreationErrors\n    });\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.BUILTIN_TASKS.COMPILATION_JOBS_CREATION_FAILURE, {\n      reasons\n    });\n  }\n});\n/**\n * Receives a list of CompilationJobsFailure and returns an error message\n * that describes the failure.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOBS_FAILURE_REASONS).addParam(\"compilationJobsCreationErrors\", undefined, undefined, config_env_1.types.any).setAction(async _ref38 => {\n  let {\n    compilationJobsCreationErrors: errors\n  } = _ref38;\n\n  var _a, _b, _c, _d;\n\n  const noCompatibleSolc = [];\n  const incompatibleOverridenSolc = [];\n  const directlyImportsIncompatibleFile = [];\n  const indirectlyImportsIncompatibleFile = [];\n  const other = [];\n\n  for (const error of errors) {\n    if (error.reason === builtin_tasks_1.CompilationJobCreationErrorReason.NO_COMPATIBLE_SOLC_VERSION_FOUND) {\n      noCompatibleSolc.push(error);\n    } else if (error.reason === builtin_tasks_1.CompilationJobCreationErrorReason.INCOMPATIBLE_OVERRIDEN_SOLC_VERSION) {\n      incompatibleOverridenSolc.push(error);\n    } else if (error.reason === builtin_tasks_1.CompilationJobCreationErrorReason.DIRECTLY_IMPORTS_INCOMPATIBLE_FILE) {\n      directlyImportsIncompatibleFile.push(error);\n    } else if (error.reason === builtin_tasks_1.CompilationJobCreationErrorReason.INDIRECTLY_IMPORTS_INCOMPATIBLE_FILE) {\n      indirectlyImportsIncompatibleFile.push(error);\n    } else if (error.reason === builtin_tasks_1.CompilationJobCreationErrorReason.OTHER_ERROR) {\n      other.push(error);\n    } else {\n      // add unrecognized errors to `other`\n      other.push(error);\n    }\n  }\n\n  let errorMessage = \"\";\n\n  if (incompatibleOverridenSolc.length > 0) {\n    errorMessage += `The compiler version for the following files is fixed through an override in your config file to a version that is incompatible with their Solidity version pragmas.\n\n`;\n\n    for (const error of incompatibleOverridenSolc) {\n      const {\n        sourceName\n      } = error.file;\n      const {\n        versionPragmas\n      } = error.file.content;\n      const versionsRange = versionPragmas.join(\" \");\n      log(`File ${sourceName} has an incompatible overriden compiler`);\n      errorMessage += `  * ${sourceName} (${versionsRange})\\n`;\n    }\n\n    errorMessage += \"\\n\";\n  }\n\n  if (noCompatibleSolc.length > 0) {\n    errorMessage += `The Solidity version pragma statement in these files doesn't match any of the configured compilers in your config. Change the pragma or configure additional compiler versions in your hardhat config.\n\n`;\n\n    for (const error of noCompatibleSolc) {\n      const {\n        sourceName\n      } = error.file;\n      const {\n        versionPragmas\n      } = error.file.content;\n      const versionsRange = versionPragmas.join(\" \");\n      log(`File ${sourceName} doesn't match any of the configured compilers`);\n      errorMessage += `  * ${sourceName} (${versionsRange})\\n`;\n    }\n\n    errorMessage += \"\\n\";\n  }\n\n  if (directlyImportsIncompatibleFile.length > 0) {\n    errorMessage += `These files import other files that use a different and incompatible version of Solidity:\n\n`;\n\n    for (const error of directlyImportsIncompatibleFile) {\n      const {\n        sourceName\n      } = error.file;\n      const {\n        versionPragmas\n      } = error.file.content;\n      const versionsRange = versionPragmas.join(\" \");\n      const incompatibleDirectImportsFiles = (_b = (_a = error.extra) === null || _a === void 0 ? void 0 : _a.incompatibleDirectImports) !== null && _b !== void 0 ? _b : [];\n      const incompatibleDirectImports = incompatibleDirectImportsFiles.map(x => `${x.sourceName} (${x.content.versionPragmas.join(\" \")})`);\n      log(`File ${sourceName} imports files ${incompatibleDirectImportsFiles.map(x => x.sourceName).join(\", \")} that use an incompatible version of Solidity`);\n      let directImportsText = \"\";\n\n      if (incompatibleDirectImports.length === 1) {\n        directImportsText = ` imports ${incompatibleDirectImports[0]}`;\n      } else if (incompatibleDirectImports.length === 2) {\n        directImportsText = ` imports ${incompatibleDirectImports[0]} and ${incompatibleDirectImports[1]}`;\n      } else if (incompatibleDirectImports.length > 2) {\n        const otherImportsCount = incompatibleDirectImports.length - 2;\n        directImportsText = ` imports ${incompatibleDirectImports[0]}, ${incompatibleDirectImports[1]} and ${otherImportsCount} other ${(0, strings_1.pluralize)(otherImportsCount, \"file\")}. Use --verbose to see the full list.`;\n      }\n\n      errorMessage += `  * ${sourceName} (${versionsRange})${directImportsText}\\n`;\n    }\n\n    errorMessage += \"\\n\";\n  }\n\n  if (indirectlyImportsIncompatibleFile.length > 0) {\n    errorMessage += `These files depend on other files that use a different and incompatible version of Solidity:\n\n`;\n\n    for (const error of indirectlyImportsIncompatibleFile) {\n      const {\n        sourceName\n      } = error.file;\n      const {\n        versionPragmas\n      } = error.file.content;\n      const versionsRange = versionPragmas.join(\" \");\n      const incompatibleIndirectImports = (_d = (_c = error.extra) === null || _c === void 0 ? void 0 : _c.incompatibleIndirectImports) !== null && _d !== void 0 ? _d : [];\n      const incompatibleImports = incompatibleIndirectImports.map(_ref39 => {\n        let {\n          dependency\n        } = _ref39;\n        return `${dependency.sourceName} (${dependency.content.versionPragmas.join(\" \")})`;\n      });\n\n      for (const {\n        dependency,\n        path: dependencyPath\n      } of incompatibleIndirectImports) {\n        const dependencyPathText = [sourceName, ...dependencyPath.map(x => x.sourceName), dependency.sourceName].join(\" -> \");\n        log(`File ${sourceName} depends on file ${dependency.sourceName} that uses an incompatible version of Solidity\nThe dependency path is ${dependencyPathText}\n`);\n      }\n\n      let indirectImportsText = \"\";\n\n      if (incompatibleImports.length === 1) {\n        indirectImportsText = ` depends on ${incompatibleImports[0]}`;\n      } else if (incompatibleImports.length === 2) {\n        indirectImportsText = ` depends on ${incompatibleImports[0]} and ${incompatibleImports[1]}`;\n      } else if (incompatibleImports.length > 2) {\n        const otherImportsCount = incompatibleImports.length - 2;\n        indirectImportsText = ` depends on ${incompatibleImports[0]}, ${incompatibleImports[1]} and ${otherImportsCount} other ${(0, strings_1.pluralize)(otherImportsCount, \"file\")}. Use --verbose to see the full list.`;\n      }\n\n      errorMessage += `  * ${sourceName} (${versionsRange})${indirectImportsText}\\n`;\n    }\n\n    errorMessage += \"\\n\";\n  }\n\n  if (other.length > 0) {\n    errorMessage += `These files and its dependencies cannot be compiled with your config. This can happen because they have incompatible Solidity pragmas, or don't match any of your configured Solidity compilers.\n\n${other.map(x => `  * ${x.file.sourceName}`).join(\"\\n\")}\n\n`;\n  }\n\n  errorMessage += `To learn more, run the command again with --verbose\n\nRead about compiler configuration at https://hardhat.org/config\n`;\n  return errorMessage;\n});\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY_LOG_COMPILATION_RESULT).addParam(\"compilationJobs\", undefined, undefined, config_env_1.types.any).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).setAction(async _ref40 => {\n  let {\n    compilationJobs\n  } = _ref40;\n  let count = 0;\n\n  for (const job of compilationJobs) {\n    count += job.getResolvedFiles().filter(file => job.emitsArtifacts(file)).length;\n  }\n\n  if (count > 0) {\n    console.log(`Compiled ${count} Solidity ${(0, strings_1.pluralize)(count, \"file\")} successfully`);\n  }\n});\n/**\n * Main task for compiling the solidity files in the project.\n *\n * The main responsibility of this task is to orchestrate and connect most of\n * the subtasks related to compiling solidity.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_SOLIDITY).addParam(\"force\", undefined, undefined, config_env_1.types.boolean).addParam(\"quiet\", undefined, undefined, config_env_1.types.boolean).addParam(\"concurrency\", undefined, DEFAULT_CONCURRENCY_LEVEL, config_env_1.types.int).setAction(async (_ref41, _ref42) => {\n  let {\n    force,\n    quiet,\n    concurrency\n  } = _ref41;\n  let {\n    artifacts,\n    config,\n    run\n  } = _ref42;\n  const sourcePaths = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOURCE_PATHS);\n  const sourceNames = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_SOURCE_NAMES, {\n    sourcePaths\n  });\n  const solidityFilesCachePath = (0, solidity_files_cache_1.getSolidityFilesCachePath)(config.paths);\n  let solidityFilesCache = await solidity_files_cache_1.SolidityFilesCache.readFromFile(solidityFilesCachePath);\n  const dependencyGraph = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_DEPENDENCY_GRAPH, {\n    sourceNames,\n    solidityFilesCache\n  });\n  solidityFilesCache = await invalidateCacheMissingArtifacts(solidityFilesCache, artifacts, dependencyGraph.getResolvedFiles());\n  const compilationJobsCreationResult = await run(task_names_1.TASK_COMPILE_SOLIDITY_GET_COMPILATION_JOBS, {\n    dependencyGraph,\n    solidityFilesCache\n  });\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_HANDLE_COMPILATION_JOBS_FAILURES, {\n    compilationJobsCreationErrors: compilationJobsCreationResult.errors\n  });\n  const compilationJobs = compilationJobsCreationResult.jobs;\n  const filteredCompilationJobs = await run(task_names_1.TASK_COMPILE_SOLIDITY_FILTER_COMPILATION_JOBS, {\n    compilationJobs,\n    force,\n    solidityFilesCache\n  });\n  const mergedCompilationJobs = await run(task_names_1.TASK_COMPILE_SOLIDITY_MERGE_COMPILATION_JOBS, {\n    compilationJobs: filteredCompilationJobs\n  });\n  const {\n    artifactsEmittedPerJob\n  } = await run(task_names_1.TASK_COMPILE_SOLIDITY_COMPILE_JOBS, {\n    compilationJobs: mergedCompilationJobs,\n    quiet,\n    concurrency\n  }); // update cache using the information about the emitted artifacts\n\n  for (const {\n    compilationJob: compilationJob,\n    artifactsEmittedPerFile: artifactsEmittedPerFile\n  } of artifactsEmittedPerJob) {\n    for (const {\n      file,\n      artifactsEmitted\n    } of artifactsEmittedPerFile) {\n      solidityFilesCache.addFile(file.absolutePath, {\n        lastModificationDate: file.lastModificationDate.valueOf(),\n        contentHash: file.contentHash,\n        sourceName: file.sourceName,\n        solcConfig: compilationJob.getSolcConfig(),\n        imports: file.content.imports,\n        versionPragmas: file.content.versionPragmas,\n        artifacts: artifactsEmitted\n      });\n    }\n  }\n\n  const allArtifactsEmittedPerFile = solidityFilesCache.getEntries(); // We know this is the actual implementation, so we use some\n  // non-public methods here.\n\n  const artifactsImpl = artifacts;\n  artifactsImpl.addValidArtifacts(allArtifactsEmittedPerFile);\n  await solidityFilesCache.writeToFile(solidityFilesCachePath);\n  await run(task_names_1.TASK_COMPILE_SOLIDITY_LOG_COMPILATION_RESULT, {\n    compilationJobs: mergedCompilationJobs,\n    quiet\n  });\n});\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_REMOVE_OBSOLETE_ARTIFACTS, async (_, _ref43) => {\n  let {\n    artifacts\n  } = _ref43;\n  // We know this is the actual implementation, so we use some\n  // non-public methods here.\n  const artifactsImpl = artifacts;\n  await artifactsImpl.removeObsoleteArtifacts();\n});\n/**\n * Returns a list of compilation tasks.\n *\n * This is the task to override to add support for other languages.\n */\n\n(0, config_env_1.subtask)(task_names_1.TASK_COMPILE_GET_COMPILATION_TASKS, async () => {\n  return [task_names_1.TASK_COMPILE_SOLIDITY];\n});\n/**\n * Main compile task.\n *\n * This is a meta-task that just gets all the compilation tasks and runs them.\n * Right now there's only a \"compile solidity\" task.\n */\n\n(0, config_env_1.task)(task_names_1.TASK_COMPILE, \"Compiles the entire project, building all artifacts\").addFlag(\"force\", \"Force compilation ignoring cache\").addFlag(\"quiet\", \"Makes the compilation process less verbose\").addParam(\"concurrency\", \"Number of compilation jobs executed in parallel. Defaults to the number of CPU cores - 1\", DEFAULT_CONCURRENCY_LEVEL, config_env_1.types.int).setAction(async (compilationArgs, _ref44) => {\n  let {\n    run\n  } = _ref44;\n  const compilationTasks = await run(task_names_1.TASK_COMPILE_GET_COMPILATION_TASKS);\n\n  for (const compilationTask of compilationTasks) {\n    await run(compilationTask, compilationArgs);\n  }\n\n  await run(task_names_1.TASK_COMPILE_REMOVE_OBSOLETE_ARTIFACTS);\n});\n/**\n * If a file is present in the cache, but some of its artifacts are missing on\n * disk, we remove it from the cache to force it to be recompiled.\n */\n\nasync function invalidateCacheMissingArtifacts(solidityFilesCache, artifacts, resolvedFiles) {\n  for (const file of resolvedFiles) {\n    const cacheEntry = solidityFilesCache.getEntry(file.absolutePath);\n\n    if (cacheEntry === undefined) {\n      continue;\n    }\n\n    const {\n      artifacts: emittedArtifacts\n    } = cacheEntry;\n\n    for (const emittedArtifact of emittedArtifacts) {\n      const artifactExists = await artifacts.artifactExists((0, contract_names_1.getFullyQualifiedName)(file.sourceName, emittedArtifact));\n\n      if (!artifactExists) {\n        log(`Invalidate cache for '${file.absolutePath}' because artifact '${emittedArtifact}' doesn't exist`);\n        solidityFilesCache.removeEntry(file.absolutePath);\n        break;\n      }\n    }\n  }\n\n  return solidityFilesCache;\n}\n/**\n * Checks if the given compilation job needs to be done.\n */\n\n\nfunction needsCompilation(job, cache) {\n  for (const file of job.getResolvedFiles()) {\n    const hasChanged = cache.hasFileChanged(file.absolutePath, file.contentHash, // we only check if the solcConfig is different for files that\n    // emit artifacts\n    job.emitsArtifacts(file) ? job.getSolcConfig() : undefined);\n\n    if (hasChanged) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction hasCompilationErrors(output) {\n  return output.errors && output.errors.some(x => x.severity === \"error\");\n}\n\nasync function checkSolcBinary(solcPath) {\n  return new Promise(resolve => {\n    const process = (0, child_process_1.exec)(`${solcPath} --version`);\n    process.on(\"exit\", code => {\n      resolve(code === 0);\n    });\n  });\n}\n/**\n * This function returns a properly formatted Internal Compiler Error message.\n *\n * This is present due to a bug in Solidity. See: https://github.com/ethereum/solidity/issues/9926\n *\n * If the error is not an ICE, or if it's properly formatted, this function returns undefined.\n */\n\n\nfunction getFormattedInternalCompilerErrorMessage(error) {\n  if (error.formattedMessage.trim() !== \"InternalCompilerError:\") {\n    return;\n  } // We trim any final `:`, as we found some at the end of the error messages,\n  // and then trim just in case a blank space was left\n\n\n  return `${error.type}: ${error.message}`.replace(/[:\\s]*$/g, \"\").trim();\n}","map":{"version":3,"mappings":"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","names":["isConsoleLogError","error","type","message","includes","log","COMPILE_TASK_FIRST_SOLC_VERSION_SUPPORTED","DEFAULT_CONCURRENCY_LEVEL","Math","max","os_1","cpus","length","task_names_1","_","config","paths","path_1","join","sources","addParam","undefined","config_env_1","any","setAction","sourcePaths","sourceNames","Promise","all","map","p","root","string","absolutePath","content","fs_extra_1","readFile","encoding","addOptionalParam","solidityFilesCache","run","parser","parse_1","resolver","resolver_1","resolvedFiles","sn","resolveSourceName","dependencyGraph","dependencyGraph_1","createFromResolvedFiles","file","solidity","connectedComponents","getConnectedComponents","compilationJobsCreationResults","graph","jobs","errors","result","concat","boolean","compilationJobs","force","neededCompilationJobs","filter","job","needsCompilation","jobsFilteredOutCount","quiet","console","int","concurrency","artifactsEmittedPerJob","versionList","solcVersion","getSolcConfig","version","semver_1","lt","errors_1","errors_list_1","BUILTIN_TASKS","COMPILE_TASK_UNSUPPORTED_SOLC_VERSION","firstSupportedVersion","push","default","pMap","pMapOptions","stopOnError","compilationJob","compilationJobIndex","artifactsEmittedPerFile","e","aggregate_error_1","isHardhatErrorType","COMPILE_FAILURE","isCompilerDownloaded","compilersCache","downloader","downloader_1","longVersion","platform","desiredPlatform","getCompilerBuild","compilerPath","nativeBinaryFailed","compilerPathResult","getDownloadedCompilerPath","WASM","SOLC","CANT_GET_COMPILER","solcBinaryWorks","checkSolcBinary","solcJsDownloader","forceSolcJs","solcjsCompilerPath","isSolcJs","input","solcJsPath","compiler","compiler_1","output","compile","solcPath","solcBuild","taskArgs","severity","errorMessage","_a","formattedMessage","chalk_1","red","warn","yellow","hasConsoleErrors","some","hasCompilationErrors","artifacts","pathToBuildInfo","saveBuildInfo","getResolvedFiles","sourceName","emitsArtifacts","artifactsEmitted","contractName","contractOutput","Object","entries","contracts","_b","artifact","saveArtifactAndDebugFile","compilationJobsCreationErrors","hasErrors","reasons","COMPILATION_JOBS_CREATION_FAILURE","noCompatibleSolc","incompatibleOverridenSolc","directlyImportsIncompatibleFile","indirectlyImportsIncompatibleFile","other","reason","builtin_tasks_1","NO_COMPATIBLE_SOLC_VERSION_FOUND","INCOMPATIBLE_OVERRIDEN_SOLC_VERSION","DIRECTLY_IMPORTS_INCOMPATIBLE_FILE","INDIRECTLY_IMPORTS_INCOMPATIBLE_FILE","OTHER_ERROR","versionPragmas","versionsRange","incompatibleDirectImportsFiles","extra","incompatibleDirectImports","x","directImportsText","otherImportsCount","incompatibleIndirectImports","_c","_d","incompatibleImports","dependency","path","dependencyPath","dependencyPathText","indirectImportsText","count","solidityFilesCachePath","solidity_files_cache_1","readFromFile","invalidateCacheMissingArtifacts","compilationJobsCreationResult","filteredCompilationJobs","mergedCompilationJobs","addFile","lastModificationDate","valueOf","contentHash","solcConfig","imports","allArtifactsEmittedPerFile","getEntries","artifactsImpl","addValidArtifacts","writeToFile","removeObsoleteArtifacts","addFlag","compilationArgs","compilationTasks","compilationTask","cacheEntry","getEntry","emittedArtifacts","emittedArtifact","artifactExists","removeEntry","cache","hasChanged","hasFileChanged","resolve","process","on","code","getFormattedInternalCompilerErrorMessage","trim","replace"],"sourceRoot":"","sources":["../src/builtin-tasks/compile.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}