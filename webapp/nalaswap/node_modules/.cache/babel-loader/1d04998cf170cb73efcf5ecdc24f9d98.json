{"ast":null,"code":"'use strict';\n\nconst {\n  kProxy\n} = require('./core/symbols');\n\nconst {\n  URL\n} = require('url');\n\nconst Agent = require('./agent');\n\nconst Dispatcher = require('./dispatcher');\n\nconst {\n  InvalidArgumentError\n} = require('./core/errors');\n\nconst kAgent = Symbol('proxy agent');\n\nclass ProxyAgent extends Dispatcher {\n  constructor(opts) {\n    super(opts);\n    this[kProxy] = buildProxyOptions(opts);\n    this[kAgent] = new Agent(opts);\n  }\n\n  dispatch(opts, handler) {\n    const {\n      host\n    } = new URL(opts.origin);\n    return this[kAgent].dispatch({ ...opts,\n      origin: this[kProxy].uri,\n      path: opts.origin + opts.path,\n      headers: { ...opts.headers,\n        host\n      }\n    }, handler);\n  }\n\n  async close() {\n    await this[kAgent].close();\n  }\n\n}\n\nfunction buildProxyOptions(opts) {\n  if (typeof opts === 'string') {\n    opts = {\n      uri: opts\n    };\n  }\n\n  if (!opts || !opts.uri) {\n    throw new InvalidArgumentError('Proxy opts.uri is mandatory');\n  }\n\n  return {\n    uri: opts.uri,\n    protocol: opts.protocol || 'https'\n  };\n}\n\nmodule.exports = ProxyAgent;","map":{"version":3,"names":["kProxy","require","URL","Agent","Dispatcher","InvalidArgumentError","kAgent","Symbol","ProxyAgent","constructor","opts","buildProxyOptions","dispatch","handler","host","origin","uri","path","headers","close","protocol","module","exports"],"sources":["/Users/ja/Desktop/MyProjects/NalaSwap/webapp/nalaswap/node_modules/undici/lib/proxy-agent.js"],"sourcesContent":["'use strict'\n\nconst { kProxy } = require('./core/symbols')\nconst { URL } = require('url')\nconst Agent = require('./agent')\nconst Dispatcher = require('./dispatcher')\nconst { InvalidArgumentError } = require('./core/errors')\n\nconst kAgent = Symbol('proxy agent')\n\nclass ProxyAgent extends Dispatcher {\n  constructor (opts) {\n    super(opts)\n    this[kProxy] = buildProxyOptions(opts)\n    this[kAgent] = new Agent(opts)\n  }\n\n  dispatch (opts, handler) {\n    const { host } = new URL(opts.origin)\n    return this[kAgent].dispatch(\n      {\n        ...opts,\n        origin: this[kProxy].uri,\n        path: opts.origin + opts.path,\n        headers: {\n          ...opts.headers,\n          host\n        }\n      },\n      handler\n    )\n  }\n\n  async close () {\n    await this[kAgent].close()\n  }\n}\n\nfunction buildProxyOptions (opts) {\n  if (typeof opts === 'string') {\n    opts = { uri: opts }\n  }\n\n  if (!opts || !opts.uri) {\n    throw new InvalidArgumentError('Proxy opts.uri is mandatory')\n  }\n\n  return {\n    uri: opts.uri,\n    protocol: opts.protocol || 'https'\n  }\n}\n\nmodule.exports = ProxyAgent\n"],"mappings":"AAAA;;AAEA,MAAM;EAAEA;AAAF,IAAaC,OAAO,CAAC,gBAAD,CAA1B;;AACA,MAAM;EAAEC;AAAF,IAAUD,OAAO,CAAC,KAAD,CAAvB;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,SAAD,CAArB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,cAAD,CAA1B;;AACA,MAAM;EAAEI;AAAF,IAA2BJ,OAAO,CAAC,eAAD,CAAxC;;AAEA,MAAMK,MAAM,GAAGC,MAAM,CAAC,aAAD,CAArB;;AAEA,MAAMC,UAAN,SAAyBJ,UAAzB,CAAoC;EAClCK,WAAW,CAAEC,IAAF,EAAQ;IACjB,MAAMA,IAAN;IACA,KAAKV,MAAL,IAAeW,iBAAiB,CAACD,IAAD,CAAhC;IACA,KAAKJ,MAAL,IAAe,IAAIH,KAAJ,CAAUO,IAAV,CAAf;EACD;;EAEDE,QAAQ,CAAEF,IAAF,EAAQG,OAAR,EAAiB;IACvB,MAAM;MAAEC;IAAF,IAAW,IAAIZ,GAAJ,CAAQQ,IAAI,CAACK,MAAb,CAAjB;IACA,OAAO,KAAKT,MAAL,EAAaM,QAAb,CACL,EACE,GAAGF,IADL;MAEEK,MAAM,EAAE,KAAKf,MAAL,EAAagB,GAFvB;MAGEC,IAAI,EAAEP,IAAI,CAACK,MAAL,GAAcL,IAAI,CAACO,IAH3B;MAIEC,OAAO,EAAE,EACP,GAAGR,IAAI,CAACQ,OADD;QAEPJ;MAFO;IAJX,CADK,EAULD,OAVK,CAAP;EAYD;;EAEU,MAALM,KAAK,GAAI;IACb,MAAM,KAAKb,MAAL,EAAaa,KAAb,EAAN;EACD;;AAzBiC;;AA4BpC,SAASR,iBAAT,CAA4BD,IAA5B,EAAkC;EAChC,IAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;IAC5BA,IAAI,GAAG;MAAEM,GAAG,EAAEN;IAAP,CAAP;EACD;;EAED,IAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAACM,GAAnB,EAAwB;IACtB,MAAM,IAAIX,oBAAJ,CAAyB,6BAAzB,CAAN;EACD;;EAED,OAAO;IACLW,GAAG,EAAEN,IAAI,CAACM,GADL;IAELI,QAAQ,EAAEV,IAAI,CAACU,QAAL,IAAiB;EAFtB,CAAP;AAID;;AAEDC,MAAM,CAACC,OAAP,GAAiBd,UAAjB"},"metadata":{},"sourceType":"script"}